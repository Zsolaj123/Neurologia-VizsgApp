{"mappings":"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","sources":["js/modules/ui-manager.js"],"sourcesContent":["/**\r\n * UI Manager Module\r\n * Manages all UI interactions and updates\r\n */\r\n\r\nclass UIManager {\r\n    constructor() {\r\n        // DOM elements\r\n        this.elements = {\r\n            topicMenu: null,\r\n            contentDisplay: null,\r\n            sectionTabs: null,\r\n            loadingOverlay: null,\r\n            errorContainer: null,\r\n            leftSidebar: null,\r\n            rightSidebar: null,\r\n            appContainer: null\r\n        };\r\n        \r\n        // Current state\r\n        this.currentTopic = null;\r\n        this.currentSection = 'reszletes';\r\n        this.isLoading = false;\r\n        \r\n        // Error dismiss timer\r\n        this.errorTimer = null;\r\n        \r\n        // Bind methods\r\n        this.handleTopicClick = this.handleTopicClick.bind(this);\r\n        this.handleSectionClick = this.handleSectionClick.bind(this);\r\n        this.handleKeyboardShortcuts = this.handleKeyboardShortcuts.bind(this);\r\n        this.handleContentScroll = this.handleContentScroll.bind(this);\r\n    }\r\n    \r\n    /**\r\n     * Debounce function for scroll events\r\n     * @private\r\n     */\r\n    debounce(func, delay) {\r\n        let timeoutId;\r\n        return function(...args) {\r\n            clearTimeout(timeoutId);\r\n            timeoutId = setTimeout(() => func.apply(this, args), delay);\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Initialize UI Manager\r\n     */\r\n    initialize() {\r\n        // Get DOM elements\r\n        this.elements.topicMenu = document.getElementById('topic-menu');\r\n        this.elements.contentDisplay = document.getElementById('content-display');\r\n        this.elements.sectionTabs = document.getElementById('section-tabs');\r\n        this.elements.loadingOverlay = document.getElementById('loading-overlay');\r\n        this.elements.errorContainer = document.getElementById('error-container');\r\n        this.elements.leftSidebar = document.getElementById('left-sidebar');\r\n        this.elements.rightSidebar = document.getElementById('right-sidebar');\r\n        this.elements.appContainer = document.getElementById('app-container');\r\n        \r\n        // Validate required elements\r\n        const required = ['topicMenu', 'contentDisplay', 'sectionTabs'];\r\n        for (const elem of required) {\r\n            if (!this.elements[elem]) {\r\n                throw new InitializationError(`Required element ${elem} not found`);\r\n            }\r\n        }\r\n        \r\n        // Set up event listeners\r\n        this.setupEventListeners();\r\n        \r\n        // Load UI state\r\n        this.loadUIState();\r\n        \r\n        // Populate topic menu\r\n        this.populateTopicMenu();\r\n        \r\n        // Initialize TOC generator\r\n        tocGenerator.initialize();\r\n        \r\n        appState.initialized = true;\r\n    }\r\n    \r\n    /**\r\n     * Set up event listeners\r\n     * @private\r\n     */\r\n    setupEventListeners() {\r\n        // Topic menu clicks\r\n        this.elements.topicMenu.addEventListener('click', this.handleTopicClick);\r\n        \r\n        // Section tab clicks\r\n        this.elements.sectionTabs.addEventListener('click', this.handleSectionClick);\r\n        \r\n        // Keyboard shortcuts\r\n        document.addEventListener('keydown', this.handleKeyboardShortcuts);\r\n        \r\n        // Content scroll for TOC sync\r\n        if (this.elements.contentDisplay) {\r\n            this.elements.contentDisplay.addEventListener('scroll', \r\n                this.debounce(() => this.handleContentScroll(), 50)\r\n            );\r\n        }\r\n        \r\n        // Sidebar toggle buttons - Removed to prevent conflicts with sidebar-manager-optimized.js\r\n        // The optimized sidebar manager handles all toggle button functionality\r\n        \r\n        // Window resize\r\n        window.addEventListener('resize', \r\n            this.debounce(() => this.adjustLayout(), 200)\r\n        );\r\n        \r\n        // Custom events\r\n        window.addEventListener('tocNavigation', (e) => {\r\n            this.handleTocNavigation(e.detail);\r\n        });\r\n    }\r\n    \r\n    /**\r\n     * Populate topic menu\r\n     * @private\r\n     */\r\n    populateTopicMenu() {\r\n        const topics = topicLoader.getAvailableTopics();\r\n        const ranges = ['1-20', '21-40', '41-59', '60-79', '80-99', '100-119', '120-139', '140-159', '160-179', '180-199', '200-219', '220-239', '240-259'];\r\n        \r\n        let html = '';\r\n        \r\n        // Structure for organizing topics by main categories\r\n        const categories = [\r\n            {\r\n                id: 'neuroanat',\r\n                title: 'Neuroanatómia',\r\n                ranges: ['1-20', '21-40', '41-59'],\r\n                collapsed: false\r\n            },\r\n            {\r\n                id: 'clinical',\r\n                title: 'Vizsgálómódszerek, Általános Klinikum',\r\n                ranges: ['60-79', '80-99', '100-119', '120-139', '140-159', '160-179'],\r\n                collapsed: false\r\n            },\r\n            {\r\n                id: 'detailed-clinical',\r\n                title: 'Részletes Klinikum',\r\n                ranges: ['180-199', '200-219', '220-239', '240-259'],\r\n                collapsed: false\r\n            }\r\n        ];\r\n        \r\n        // Load collapsed states from localStorage\r\n        const collapsedStates = this.loadCollapsedStates();\r\n        \r\n        categories.forEach(category => {\r\n            const categoryCollapsed = collapsedStates.categories[category.id] || false;\r\n            \r\n            html += `\r\n                <div class=\"topic-category ${categoryCollapsed ? 'collapsed' : ''}\" data-category=\"${category.id}\">\r\n                    <div class=\"category-header\" onclick=\"uiManager.toggleCategory('${category.id}')\">\r\n                        <span class=\"collapse-icon\">${categoryCollapsed ? '▶' : '▼'}</span>\r\n                        <h3 class=\"category-title\">${category.title}</h3>\r\n                    </div>\r\n                    <div class=\"category-content\">`;\r\n            \r\n            category.ranges.forEach(range => {\r\n                const rangeTopics = topics.filter(t => this.getTopicRange(t.id) === range);\r\n                const rangeCollapsed = collapsedStates.ranges[range] || false;\r\n                \r\n                if (rangeTopics.length > 0) {\r\n                    html += `\r\n                        <div class=\"topic-range ${rangeCollapsed ? 'collapsed' : ''}\" data-range=\"${range}\">\r\n                            <div class=\"range-header\" onclick=\"uiManager.toggleRange('${range}')\">\r\n                                <span class=\"collapse-icon\">${rangeCollapsed ? '▶' : '▼'}</span>\r\n                                <span class=\"range-title\">${range}. tételek</span>\r\n                                <span class=\"range-count\">(${rangeTopics.length})</span>\r\n                            </div>\r\n                            <div class=\"topic-list\">`;\r\n                    \r\n                    for (const topic of rangeTopics) {\r\n                        // Don't add number prefix if title already starts with number\r\n                        const titleStartsWithNumber = /^\\d+\\./.test(topic.title);\r\n                        html += `\r\n                            <button class=\"topic-item\" data-topic-id=\"${topic.id}\">\r\n                                ${titleStartsWithNumber ? '' : `<span class=\"topic-number\">${topic.id}.</span>`}\r\n                                <span class=\"topic-title\">${topic.title}</span>\r\n                            </button>\r\n                        `;\r\n                    }\r\n                    \r\n                    html += '</div></div>';\r\n                }\r\n            });\r\n            \r\n            html += '</div></div>';\r\n        });\r\n        \r\n        // Add expand/collapse all button\r\n        html = `\r\n            <div class=\"topic-menu-controls\">\r\n                <button class=\"control-btn\" id=\"topic-expand-all\" onclick=\"uiManager.toggleAllTopics()\">Összes kinyitása</button>\r\n            </div>\r\n        ` + html;\r\n        \r\n        this.elements.topicMenu.innerHTML = html;\r\n    }\r\n    \r\n    /**\r\n     * Load collapsed states from localStorage\r\n     * @private\r\n     */\r\n    loadCollapsedStates() {\r\n        const saved = localStorage.getItem('topicMenuCollapsedStates');\r\n        if (saved) {\r\n            return JSON.parse(saved);\r\n        }\r\n        return {\r\n            categories: {},\r\n            ranges: {}\r\n        };\r\n    }\r\n    \r\n    /**\r\n     * Save collapsed states to localStorage\r\n     * @private\r\n     */\r\n    saveCollapsedStates(states) {\r\n        localStorage.setItem('topicMenuCollapsedStates', JSON.stringify(states));\r\n    }\r\n    \r\n    /**\r\n     * Toggle category collapse state\r\n     * @param {string} categoryId - The category ID\r\n     */\r\n    toggleCategory(categoryId) {\r\n        const categoryEl = this.elements.topicMenu.querySelector(`[data-category=\"${categoryId}\"]`);\r\n        if (!categoryEl) return;\r\n        \r\n        const isCollapsed = categoryEl.classList.contains('collapsed');\r\n        categoryEl.classList.toggle('collapsed');\r\n        \r\n        // Update icon\r\n        const icon = categoryEl.querySelector('.collapse-icon');\r\n        if (icon) {\r\n            icon.textContent = isCollapsed ? '▼' : '▶';\r\n        }\r\n        \r\n        // Save state\r\n        const states = this.loadCollapsedStates();\r\n        states.categories[categoryId] = !isCollapsed;\r\n        this.saveCollapsedStates(states);\r\n    }\r\n    \r\n    /**\r\n     * Toggle range collapse state\r\n     * @param {string} range - The range (e.g., '1-20')\r\n     */\r\n    toggleRange(range) {\r\n        const rangeEl = this.elements.topicMenu.querySelector(`[data-range=\"${range}\"]`);\r\n        if (!rangeEl) return;\r\n        \r\n        const isCollapsed = rangeEl.classList.contains('collapsed');\r\n        rangeEl.classList.toggle('collapsed');\r\n        \r\n        // Update icon\r\n        const icon = rangeEl.querySelector('.collapse-icon');\r\n        if (icon) {\r\n            icon.textContent = isCollapsed ? '▼' : '▶';\r\n        }\r\n        \r\n        // Save state\r\n        const states = this.loadCollapsedStates();\r\n        states.ranges[range] = !isCollapsed;\r\n        this.saveCollapsedStates(states);\r\n        \r\n        // Stop event propagation\r\n        event.stopPropagation();\r\n    }\r\n    \r\n    /**\r\n     * Toggle all categories and ranges\r\n     */\r\n    toggleAllTopics() {\r\n        const allCategories = this.elements.topicMenu.querySelectorAll('.topic-category');\r\n        const allRanges = this.elements.topicMenu.querySelectorAll('.topic-range');\r\n        const expandButton = document.getElementById('topic-expand-all');\r\n        \r\n        // Check if any are collapsed\r\n        const hasCollapsed = Array.from(allCategories).some(el => el.classList.contains('collapsed')) ||\r\n                           Array.from(allRanges).some(el => el.classList.contains('collapsed'));\r\n        \r\n        if (hasCollapsed) {\r\n            // Expand all\r\n            this.expandAll();\r\n            if (expandButton) expandButton.textContent = 'Összes bezárása';\r\n        } else {\r\n            // Collapse all\r\n            this.collapseAll();\r\n            if (expandButton) expandButton.textContent = 'Összes kinyitása';\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Expand all categories and ranges\r\n     */\r\n    expandAll() {\r\n        // Expand all categories\r\n        this.elements.topicMenu.querySelectorAll('.topic-category').forEach(el => {\r\n            el.classList.remove('collapsed');\r\n            const icon = el.querySelector('.category-header .collapse-icon');\r\n            if (icon) icon.textContent = '▼';\r\n        });\r\n        \r\n        // Expand all ranges\r\n        this.elements.topicMenu.querySelectorAll('.topic-range').forEach(el => {\r\n            el.classList.remove('collapsed');\r\n            const icon = el.querySelector('.range-header .collapse-icon');\r\n            if (icon) icon.textContent = '▼';\r\n        });\r\n        \r\n        // Clear saved states\r\n        this.saveCollapsedStates({ categories: {}, ranges: {} });\r\n    }\r\n    \r\n    /**\r\n     * Collapse all categories and ranges\r\n     */\r\n    collapseAll() {\r\n        const states = { categories: {}, ranges: {} };\r\n        \r\n        // Collapse all categories\r\n        this.elements.topicMenu.querySelectorAll('.topic-category').forEach(el => {\r\n            el.classList.add('collapsed');\r\n            const icon = el.querySelector('.category-header .collapse-icon');\r\n            if (icon) icon.textContent = '▶';\r\n            const categoryId = el.dataset.category;\r\n            if (categoryId) states.categories[categoryId] = true;\r\n        });\r\n        \r\n        // Collapse all ranges\r\n        this.elements.topicMenu.querySelectorAll('.topic-range').forEach(el => {\r\n            el.classList.add('collapsed');\r\n            const icon = el.querySelector('.range-header .collapse-icon');\r\n            if (icon) icon.textContent = '▶';\r\n            const range = el.dataset.range;\r\n            if (range) states.ranges[range] = true;\r\n        });\r\n        \r\n        // Save states\r\n        this.saveCollapsedStates(states);\r\n    }\r\n    \r\n    /**\r\n     * Get topic range\r\n     * @private\r\n     */\r\n    getTopicRange(topicId) {\r\n        if (topicId <= 20) return '1-20';\r\n        if (topicId <= 40) return '21-40';\r\n        if (topicId <= 59) return '41-59';\r\n        if (topicId <= 79) return '60-79';\r\n        if (topicId <= 99) return '80-99';\r\n        if (topicId <= 119) return '100-119';\r\n        if (topicId <= 139) return '120-139';\r\n        if (topicId <= 159) return '140-159';\r\n        if (topicId <= 179) return '160-179';\r\n        if (topicId <= 199) return '180-199';\r\n        if (topicId <= 219) return '200-219';\r\n        if (topicId <= 239) return '220-239';\r\n        return '240-259';\r\n    }\r\n    \r\n    /**\r\n     * Handle topic click\r\n     * @private\r\n     */\r\n    async handleTopicClick(event) {\r\n        const topicItem = event.target.closest('.topic-item');\r\n        if (!topicItem) return;\r\n        \r\n        const topicId = parseInt(topicItem.dataset.topicId);\r\n        if (isNaN(topicId)) return;\r\n        \r\n        // Don't reload if already current\r\n        if (this.currentTopic && this.currentTopic.id === topicId) {\r\n            return;\r\n        }\r\n        \r\n        await this.loadTopic(topicId);\r\n    }\r\n    \r\n    /**\r\n     * Load a topic\r\n     * @param {number} topicId - The topic ID\r\n     */\r\n    async loadTopic(topicId) {\r\n        try {\r\n            this.showLoading(true);\r\n            \r\n            // Load topic\r\n            const topic = await topicLoader.loadTopic(topicId);\r\n            \r\n            // Update state\r\n            this.currentTopic = topic;\r\n            appState.setCurrentTopic(topic);\r\n            \r\n            // Update UI\r\n            this.displayTopic(topic);\r\n            this.updateActiveTopicItem(topicId);\r\n            \r\n            // Generate TOC\r\n            tocGenerator.generateTOC(topic);\r\n            \r\n            // Reset to detailed section\r\n            this.switchSection('reszletes');\r\n            \r\n            // Scroll to top of content\r\n            if (this.elements.contentDisplay) {\r\n                this.elements.contentDisplay.scrollTop = 0;\r\n            }\r\n            \r\n            // Save UI state\r\n            appState.ui.currentTopicId = topicId;\r\n            appState.saveUIState();\r\n            \r\n            // Emit event\r\n            window.dispatchEvent(new CustomEvent('topicDisplayed', {\r\n                detail: { topicId, topic }\r\n            }));\r\n            \r\n        } catch (error) {\r\n            appState.logError(error, 'topic-load');\r\n            this.showError(ErrorUtils.formatForDisplay(error));\r\n        } finally {\r\n            this.showLoading(false);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Display topic content\r\n     * @private\r\n     */\r\n    displayTopic(topic) {\r\n        if (!topic) {\r\n            this.elements.contentDisplay.innerHTML = '';\r\n            return;\r\n        }\r\n        \r\n        // Display current section\r\n        const section = topic.getSection(this.currentSection);\r\n        \r\n        if (!section || section.isEmpty) {\r\n            this.displayEmptySection(this.currentSection);\r\n        } else {\r\n            this.elements.contentDisplay.innerHTML = this.wrapContent(section.content);\r\n        }\r\n        \r\n        // Update section tabs\r\n        this.updateSectionTabs(topic);\r\n        \r\n        // Scroll to top\r\n        this.elements.contentDisplay.scrollTop = 0;\r\n    }\r\n    \r\n    /**\r\n     * Wrap content with proper structure\r\n     * @private\r\n     */\r\n    wrapContent(html) {\r\n        return `<div class=\"topic-content\">${html}</div>`;\r\n    }\r\n    \r\n    /**\r\n     * Display empty section message\r\n     * @private\r\n     */\r\n    displayEmptySection(sectionType) {\r\n        const messages = {\r\n            'reszletes': 'Nincs elérhető részletes leírás ehhez a tételhez.',\r\n            'osszefoglalas': 'Nincs elérhető összefoglalás ehhez a tételhez.',\r\n            'kepek': 'Nincsenek elérhető képek vagy diagrammok ehhez a tételhez.'\r\n        };\r\n        \r\n        this.elements.contentDisplay.innerHTML = `\r\n            <div class=\"empty-section\">\r\n                <p>${messages[sectionType] || 'Ez a szakasz üres.'}</p>\r\n            </div>\r\n        `;\r\n    }\r\n    \r\n    /**\r\n     * Update section tabs\r\n     * @private\r\n     */\r\n    updateSectionTabs(topic) {\r\n        const tabs = [\r\n            { id: 'reszletes', label: 'Részletes', available: true },\r\n            { id: 'osszefoglalas', label: 'Összefoglalás', available: topic.hasSection('osszefoglalas') },\r\n            { id: 'kepek', label: 'Képek', available: topic.hasSection('kepek') }\r\n        ];\r\n        \r\n        let html = '';\r\n        for (const tab of tabs) {\r\n            const isActive = tab.id === this.currentSection;\r\n            const isDisabled = !tab.available;\r\n            \r\n            html += `\r\n                <button class=\"section-tab ${isActive ? 'active' : ''} ${isDisabled ? 'disabled' : ''}\"\r\n                        data-section=\"${tab.id}\"\r\n                        ${isDisabled ? 'disabled' : ''}>\r\n                    ${tab.label}\r\n                    ${isDisabled ? '<span class=\"unavailable\">(nem elérhető)</span>' : ''}\r\n                </button>\r\n            `;\r\n        }\r\n        \r\n        this.elements.sectionTabs.innerHTML = html;\r\n    }\r\n    \r\n    /**\r\n     * Handle section click\r\n     * @private\r\n     */\r\n    handleSectionClick(event) {\r\n        const tab = event.target.closest('.section-tab:not(.disabled)');\r\n        if (!tab) return;\r\n        \r\n        const section = tab.dataset.section;\r\n        if (section && section !== this.currentSection) {\r\n            this.switchSection(section);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Switch to a different section\r\n     * @param {string} sectionType - The section type\r\n     */\r\n    switchSection(sectionType) {\r\n        if (!this.currentTopic) return;\r\n        \r\n        this.currentSection = sectionType;\r\n        appState.ui.activeSection = sectionType;\r\n        \r\n        // Update content\r\n        this.displayTopic(this.currentTopic);\r\n        \r\n        // Save UI state\r\n        appState.saveUIState();\r\n        \r\n        // Emit event\r\n        window.dispatchEvent(new CustomEvent('sectionSwitched', {\r\n            detail: { \r\n                sectionType, \r\n                topicId: this.currentTopic.id,\r\n                isEmpty: !this.currentTopic.hasSection(sectionType)\r\n            }\r\n        }));\r\n    }\r\n    \r\n    /**\r\n     * Update active topic item\r\n     * @private\r\n     */\r\n    updateActiveTopicItem(topicId) {\r\n        // Remove previous active\r\n        const previousActive = this.elements.topicMenu.querySelector('.topic-item.active');\r\n        if (previousActive) {\r\n            previousActive.classList.remove('active');\r\n        }\r\n        \r\n        // Set new active\r\n        const newActive = this.elements.topicMenu.querySelector(`[data-topic-id=\"${topicId}\"]`);\r\n        if (newActive) {\r\n            newActive.classList.add('active');\r\n            \r\n            // Ensure visible in scrollable container\r\n            newActive.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Show/hide loading overlay\r\n     * @param {boolean} show - Whether to show loading\r\n     */\r\n    showLoading(show) {\r\n        this.isLoading = show;\r\n        appState.setLoading(show);\r\n        \r\n        if (this.elements.loadingOverlay) {\r\n            if (show) {\r\n                this.elements.loadingOverlay.classList.remove('hidden');\r\n            } else {\r\n                this.elements.loadingOverlay.classList.add('hidden');\r\n            }\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Show error message\r\n     * @param {string} message - The error message\r\n     */\r\n    showError(message) {\r\n        if (!this.elements.errorContainer) return;\r\n        \r\n        // Clear previous timer\r\n        if (this.errorTimer) {\r\n            clearTimeout(this.errorTimer);\r\n        }\r\n        \r\n        // Show error\r\n        this.elements.errorContainer.innerHTML = `\r\n            <div class=\"error-message\">\r\n                <span class=\"error-icon\">⚠️</span>\r\n                <span class=\"error-text\">${message}</span>\r\n                <button class=\"error-close\" onclick=\"uiManager.hideError()\">×</button>\r\n            </div>\r\n        `;\r\n        this.elements.errorContainer.classList.remove('hidden');\r\n        \r\n        // Auto-hide after 5 seconds\r\n        this.errorTimer = setTimeout(() => this.hideError(), 5000);\r\n    }\r\n    \r\n    /**\r\n     * Hide error message\r\n     */\r\n    hideError() {\r\n        if (this.elements.errorContainer) {\r\n            this.elements.errorContainer.classList.add('hidden');\r\n        }\r\n        \r\n        if (this.errorTimer) {\r\n            clearTimeout(this.errorTimer);\r\n            this.errorTimer = null;\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Handle keyboard shortcuts\r\n     * @private\r\n     */\r\n    handleKeyboardShortcuts(event) {\r\n        // Don't handle if in input field\r\n        if (event.target.tagName === 'INPUT' || event.target.tagName === 'TEXTAREA') {\r\n            return;\r\n        }\r\n        \r\n        switch (event.key) {\r\n            case '1':\r\n                if (event.ctrlKey || event.metaKey) {\r\n                    event.preventDefault();\r\n                    this.toggleSidebar('left');\r\n                }\r\n                break;\r\n                \r\n            case '2':\r\n                if (event.ctrlKey || event.metaKey) {\r\n                    event.preventDefault();\r\n                    this.toggleSidebar('right');\r\n                }\r\n                break;\r\n                \r\n            case 'ArrowLeft':\r\n                if (event.altKey) {\r\n                    event.preventDefault();\r\n                    this.navigateTopic(-1);\r\n                }\r\n                break;\r\n                \r\n            case 'ArrowRight':\r\n                if (event.altKey) {\r\n                    event.preventDefault();\r\n                    this.navigateTopic(1);\r\n                }\r\n                break;\r\n                \r\n            case 'r':\r\n                if (!event.ctrlKey && !event.metaKey && !event.altKey) {\r\n                    this.switchSection('reszletes');\r\n                }\r\n                break;\r\n                \r\n            case 'o':\r\n                if (!event.ctrlKey && !event.metaKey && !event.altKey) {\r\n                    this.switchSection('osszefoglalas');\r\n                }\r\n                break;\r\n                \r\n            case 'k':\r\n                if (!event.ctrlKey && !event.metaKey && !event.altKey) {\r\n                    this.switchSection('kepek');\r\n                }\r\n                break;\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Toggle sidebar visibility\r\n     * @param {string} side - 'left' or 'right'\r\n     */\r\n    toggleSidebar(side) {\r\n        // Delegate to sidebar-manager-optimized.js instead of handling here\r\n        if (window.sidebarManagerOptimized && window.sidebarManagerOptimized.handleToggle) {\r\n            window.sidebarManagerOptimized.handleToggle(side);\r\n        } else {\r\n            // Fallback only if optimized manager not available\r\n            console.warn('Sidebar manager not available, using fallback');\r\n            appState.ui.toggleSidebar(side);\r\n            \r\n            const sidebar = side === 'left' ? this.elements.leftSidebar : this.elements.rightSidebar;\r\n            if (sidebar) {\r\n                sidebar.classList.toggle('hidden');\r\n            }\r\n            \r\n            this.adjustLayout();\r\n            appState.saveUIState();\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Navigate to next/previous topic\r\n     * @private\r\n     */\r\n    navigateTopic(direction) {\r\n        if (!this.currentTopic) return;\r\n        \r\n        const currentId = this.currentTopic.id;\r\n        const newId = currentId + direction;\r\n        \r\n        // Check bounds\r\n        if (newId >= 1 && newId <= 259) {\r\n            this.loadTopic(newId);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Handle content scroll for TOC sync\r\n     * @private\r\n     */\r\n    handleContentScroll() {\r\n        tocGenerator.updateActiveFromScroll();\r\n    }\r\n    \r\n    /**\r\n     * Handle TOC navigation\r\n     * @private\r\n     */\r\n    handleTocNavigation(detail) {\r\n        // Content scrolling is handled by tocGenerator\r\n        // We just need to track the event\r\n        console.log('TOC navigation:', detail);\r\n    }\r\n    \r\n    /**\r\n     * Adjust layout based on sidebar visibility\r\n     * @private\r\n     */\r\n    adjustLayout() {\r\n        if (!this.elements.appContainer) return;\r\n        \r\n        const leftVisible = !this.elements.leftSidebar?.classList.contains('hidden');\r\n        const rightVisible = !this.elements.rightSidebar?.classList.contains('hidden');\r\n        \r\n        this.elements.appContainer.classList.toggle('left-sidebar-hidden', !leftVisible);\r\n        this.elements.appContainer.classList.toggle('right-sidebar-hidden', !rightVisible);\r\n    }\r\n    \r\n    /**\r\n     * Load UI state from storage\r\n     * @private\r\n     */\r\n    loadUIState() {\r\n        appState.loadUIState();\r\n        \r\n        // Apply loaded state\r\n        if (!appState.ui.leftSidebarVisible) {\r\n            this.toggleSidebar('left');\r\n        }\r\n        \r\n        if (!appState.ui.rightSidebarVisible) {\r\n            this.toggleSidebar('right');\r\n        }\r\n        \r\n        // Load last topic if available\r\n        if (appState.ui.currentTopicId) {\r\n            setTimeout(() => {\r\n                this.loadTopic(appState.ui.currentTopicId);\r\n            }, 100);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Debounce helper\r\n     * @private\r\n     */\r\n    debounce(func, wait) {\r\n        let timeout;\r\n        return function executedFunction(...args) {\r\n            const later = () => {\r\n                clearTimeout(timeout);\r\n                func(...args);\r\n            };\r\n            clearTimeout(timeout);\r\n            timeout = setTimeout(later, wait);\r\n        };\r\n    }\r\n    \r\n    /**\r\n     * Get current state\r\n     */\r\n    getState() {\r\n        return {\r\n            currentTopicId: this.currentTopic?.id,\r\n            currentSection: this.currentSection,\r\n            isLoading: this.isLoading,\r\n            sidebarStates: {\r\n                left: !this.elements.leftSidebar?.classList.contains('hidden'),\r\n                right: !this.elements.rightSidebar?.classList.contains('hidden')\r\n            }\r\n        };\r\n    }\r\n    \r\n    /**\r\n     * Destroy UI manager\r\n     */\r\n    destroy() {\r\n        // Remove event listeners\r\n        this.elements.topicMenu?.removeEventListener('click', this.handleTopicClick);\r\n        this.elements.sectionTabs?.removeEventListener('click', this.handleSectionClick);\r\n        document.removeEventListener('keydown', this.handleKeyboardShortcuts);\r\n        this.elements.contentDisplay?.removeEventListener('scroll', this.handleContentScroll);\r\n        \r\n        // Clear timers\r\n        if (this.errorTimer) {\r\n            clearTimeout(this.errorTimer);\r\n        }\r\n        \r\n        // Destroy TOC generator\r\n        tocGenerator.destroy();\r\n        \r\n        // Clear state\r\n        this.currentTopic = null;\r\n        appState.clearCurrentTopic();\r\n    }\r\n}\r\n\r\n// Create singleton instance\r\nconst uiManager = new UIManager();\r\n\r\n// Make it available globally for browser use\r\nwindow.uiManager = uiManager;\r\n\r\n// Export for use in other modules\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = { UIManager, uiManager };\r\n}"],"names":[],"version":3,"file":"frontend.1d3499d7.js.map","sourceRoot":"/__parcel_source_root/"}