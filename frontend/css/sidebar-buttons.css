/**
 * Sidebar Toggle Buttons - Consolidated Styles
 * Single source of truth for all toggle button styling
 */

/* ============================================
   SIDEBAR TOGGLE BUTTONS
   ============================================ */

/* Base toggle button styles - inside headers */
.sidebar-toggle,
#left-sidebar-toggle,
#right-sidebar-toggle {
    /* Sizing */
    width: 35px;
    height: 35px;
    
    /* Appearance */
    background: var(--bg-tertiary);
    border: 2px solid var(--primary-green);
    border-radius: var(--radius-md);
    color: var(--primary-green);
    font-size: 1.2rem;
    
    /* Layout */
    display: flex;
    align-items: center;
    justify-content: center;
    
    /* Interaction */
    cursor: pointer;
    opacity: 0.6;
    transition: all 0.3s ease;
    
    /* Visual effects */
    box-shadow: 0 0 10px rgba(0, 255, 65, 0.3);
    
    /* Ensure visibility */
    visibility: visible;
    position: relative;
    z-index: 999;
    pointer-events: auto;
    
    /* Prevent shrinking */
    flex-shrink: 0;
    margin: 0;
    padding: 0;
}

/* Hover state */
.sidebar-toggle:hover,
#left-sidebar-toggle:hover,
#right-sidebar-toggle:hover {
    opacity: 1;
    background: var(--primary-green);
    color: var(--bg-primary);
    box-shadow: 0 0 20px rgba(0, 255, 65, 0.8);
}

/* Position buttons correctly in headers */
#left-sidebar .sidebar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

#right-sidebar .sidebar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* Button positioning - mirrored */
#left-sidebar .sidebar-header #left-sidebar-toggle {
    order: 2; /* Right side */
    margin-left: auto;
}

#right-sidebar .sidebar-header #right-sidebar-toggle {
    order: -1; /* Left side */
    margin-right: auto;
}

/* Fixed position buttons for collapsed sidebars */
.sidebar-toggle-fixed {
    position: fixed;
    width: 45px;
    height: 45px;
    top: calc(var(--header-height) + 20px);
    background: var(--bg-tertiary);
    border: 2px solid var(--primary-green);
    border-radius: var(--radius-md);
    color: var(--primary-green);
    font-size: 1.5rem;
    display: none; /* Hidden by default */
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: var(--z-toggle-buttons);
    box-shadow: 0 0 20px rgba(0, 255, 65, 0.5);
    transition: all 0.3s ease;
}

#left-sidebar-toggle-fixed {
    left: 10px;
}

#right-sidebar-toggle-fixed {
    right: 10px;
}

.sidebar-toggle-fixed:hover {
    background: var(--primary-green);
    color: var(--bg-primary);
    transform: scale(1.1);
    box-shadow: 0 0 30px rgba(0, 255, 65, 0.8);
}

/* Show fixed buttons when sidebars are hidden */
.left-sidebar-hidden #left-sidebar-toggle-fixed {
    display: flex;
}

.right-sidebar-hidden #right-sidebar-toggle-fixed {
    display: flex;
}

/* ============================================
   BROWSER COMPATIBILITY
   ============================================ */

/* For browsers that don't support :has() selector */
@supports not selector(:has(*)) {
    /* Use body classes instead */
    .left-sidebar-hidden #app-container {
        grid-template-columns: 0 1fr var(--toc-width);
    }
    
    .right-sidebar-hidden #app-container {
        grid-template-columns: var(--sidebar-width) 1fr 0;
    }
    
    .left-sidebar-hidden.right-sidebar-hidden #app-container {
        grid-template-columns: 0 1fr 0;
    }
}

/* Mobile responsive */
@media (max-width: 768px) {
    .sidebar-toggle-fixed {
        opacity: 1;
        pointer-events: auto;
        display: flex;
    }
    
    .sidebar-toggle {
        /* Keep header buttons visible on mobile */
        opacity: 1;
    }
}